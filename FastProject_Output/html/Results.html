<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>FastProject Viewer</title>
    <script type="text/javascript" src="jquery-2.1.4.min.js"></script>

</head>
<body>
    <div>
        <span>How many genes to return?</span><br/>
        <input type="text" id="sampleInput"></input>
        <br/ >
        <br/ >
        <button onclick="call_server()">Call the Server</button>
        <br/ >
        <br/ >
        <span id="result"></span>
    </div>
    
    <div>
      <span>Which Signature would you like to see?</span></br>
      <input type="text" id="sampleInput2"></input>
      <br/>
      <br/>
      <button onclick="callsig_server()">Call the Server</button>
      <br/ >
      <br/ >
      <span id = "result3"></span>
    </div>
    
    <div>
      <span>Give Expression matrix:</span>
      <br />
      <button onclick="show_expression()">Call the Server</button>
      <br />
      <br />
      <span id= "result2"></span>
    </div>
    
    <div>
      <span>Which Signature would you like to see?</span></br>
      <input type="text" id="sampleInput3"></input>
      <br/>
      <br/>
      <button onclick="callsigscore_server()">Call the Server</button>
      <br/ >
      <br/ >
      <span id = "result4"></span>
    </div>
    
    <div>
      <span>Which Signature Ranks would you like to see?</span></br>
      <input type="text" id="sampleInput4"></input>
      <br/>
      <br/>
      <button onclick="callsigrank_server()">Call the Server</button>
      <br/ >
      <br/ >
      <span id = "result5"></span>
    </div>
    
    <div>
      <span>Which (filter; projection) would you like to see?</span></br>
      <input type="text" id="sampleInput5"></input>
      <br/>
      <br/>
      <button onclick="callfilterproj_server()">Call the Server</button>
      <br/ >
      <br/ >
      <span id = "result6"></span>
    </div>
    
    <div>
      <span>For which filter would you like to see the SigProjMatrix?</span></br>
      <input type="text" id="sampleInput6"></input>
      <br/>
      <br/>
      <button onclick="callsigprojmatrix_server()">Call the Server</button>
      <br/ >
      <br/ >
      <span id = "result7"></span>
    </div>
  
    <div>
      <span>For which filter would you like to see the SigProjMatrix_P?</span></br>
      <input type="text" id="sampleInput7"></input>
      <br/>
      <br/>
      <button onclick="callsigprojmatrixP_server()">Call the Server</button>
      <br/ >
      <br/ >
      <span id = "result8"></span>
    </div>
    
    <div>
      <span>Which (filter; projection; cluster) would you like to see?</span></br>
      <input type="text" id="sampleInput8"></input>
      <br/>
      <br/>
      <button onclick="callcluster_server()">Call the Server</button>
      <br/ >
      <br/ >
      <span id = "result9"></span>
    </div>

    <script type="text/javascript">

call_server = function()
{
    var val = $('#sampleInput').val()
    $.ajax('/genes', 
            {'data': {'number': parseInt(val)}}
            ).done(function(data){
        var result_span = $('#result')
        result_span.text(data.join(", "))
    })
}

callsig_server = function() {
  var val = $('#sampleInput2').val()
  var query = "/Signature/Info/"
  query = query.concat(encodeURI(val))
  $.ajax(query
        ).done(function(data){
          var result_span = $('#result3')
          result_span.text(data)
        })
}

callsigscore_server = function() {
  var val = $('#sampleInput3').val()
  var query = "/Signature/Scores/"
  query = query.concat(encodeURI(val))
  $.ajax(query
          ).done(function(data) {
          var result_span = $('#result4')
          result_span.text(data)
        })
}

callsigrank_server = function() {
  var val = $('#sampleInput4').val()
  var query = "/Signature/Ranks/"
  query = query.concat(encodeURI(val))
  $.ajax(query
          ).done(function(data) {
          var result_span = $('#result5')
          result_span.text(data)
        })
}

callfilterproj_server = function() {
  var val = $('#sampleInput5').val().split(";")
  var filter = val[0]
  var projName = val[1]
  var query = "/FilterGroup/"
  query = query.concat(encodeURI(filter), "/", encodeURI(projName), "/coordinates")
  console.log(query)
  $.ajax(query
          ).done(function(data) {
          var result_span = $('#result6')
          result_span.text(data)
        })
}

callsigprojmatrix_server = function() {
  var val = $('#sampleInput6').val()
  var query = "/FilterGroup/"
  query = query.concat(encodeURI(val), "/SigProjMatrix")
  console.log(query)
  $.ajax(query
          ).done(function(data) {
          var result_span = $('#result7')
          result_span.text(data)
        })
}

callsigprojmatrixP_server = function() {
  var val = $('#sampleInput7').val()
  var query = "/FilterGroup/"
  query = query.concat(encodeURI(val), "/SigProjMatrix_P")
  console.log(query)
  $.ajax(query
          ).done(function(data) {
          var result_span = $('#result8')
          result_span.text(data)
        })
}

callcluster_server = function() {
  var val = $('#sampleInput8').val().split(";")
  var filter = val[0]
  var proj = val[1]
  var clust = val[2]
  var query = "/FilterGroup/"
  query = query.concat(encodeURI(filter), "/", encodeURI(proj), "/clusters/", encodeURI(clust))
  console.log(query)
  $.ajax(query
          ).done(function(data) {
          var result_span = $('#result9')
          result_span.text(data)
        })
}
show_expression = function() {
  console.log("here!")
  $.ajax('/Expression'
  ).done(function(data) {
    var result_span = $('#result2')
    result_span.text(data)
  })
}
    </script>
</body>
</html>
